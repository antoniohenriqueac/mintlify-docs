---
title: 'Tenants e Workspaces'
description: 'Entenda o sistema multi-tenant e como funcionam os workspaces no ConnectVets Notes'
---

## O que s√£o Tenants/Workspaces?

**Tenants** (chamados de **Workspaces** no frontend) s√£o espa√ßos isolados onde cada cl√≠nica veterin√°ria gerencia suas consultas, notas e configura√ß√µes de forma independente. √â o n√∫cleo do sistema multi-tenant do ConnectVets Notes.

<Info>
  **Backend** = "Tenant" | **Frontend** = "Workspace"
  
  Ambos se referem ao mesmo conceito: um espa√ßo isolado para uma cl√≠nica veterin√°ria.
</Info>

## Como Funcionam

### Arquitetura Multi-Tenant

```mermaid
graph TB
    Usuario[üë§ Usu√°rio] 
    
    subgraph "Workspaces do Usu√°rio"
        WS1[üè• Cl√≠nica Centro<br/>workspace_001]
        WS2[üè• PetCare Sul<br/>workspace_002] 
        WS3[üè• VetMed Norte<br/>workspace_003]
    end
    
    subgraph "Dados Isolados"
        D1[üìã Notas Centro<br/>üîë API Keys<br/>‚öôÔ∏è Configura√ß√µes]
        D2[üìã Notas PetCare<br/>üîë API Keys<br/>‚öôÔ∏è Configura√ß√µes]
        D3[üìã Notas VetMed<br/>üîë API Keys<br/>‚öôÔ∏è Configura√ß√µes]
    end
    
    Usuario --> WS1
    Usuario --> WS2 
    Usuario --> WS3
    
    WS1 --> D1
    WS2 --> D2
    WS3 --> D3
```

### Isolamento de Dados

Cada workspace mant√©m **dados completamente isolados**:

| Recurso | Escopo | Exemplo |
|---------|--------|---------|
| **Notas** | Por workspace | Consultas da Cl√≠nica Centro ‚â† PetCare |
| **API Keys** | Por workspace | Chave √∫nica para cada cl√≠nica |
| **Configura√ß√µes** | Por workspace | Webhooks, integra√ß√µes pr√≥prias |
| **Usu√°rios** | Por workspace | Veterin√°rios espec√≠ficos da cl√≠nica |
| **Agentes IA** | Por workspace | Treinamentos personalizados |

## Cria√ß√£o de Workspaces

### Processo de Cria√ß√£o

<Steps>
  <Step title="Abrir Modal">
    Usu√°rio clica em "Novo Workspace" no painel
  </Step>
  <Step title="Preencher Nome">
    Digite o nome da cl√≠nica (m√°x. 32 caracteres)
  </Step>
  <Step title="Valida√ß√£o">
    Sistema verifica permiss√µes e plano ativo
  </Step>
  <Step title="Cria√ß√£o">
    Novo workspace √© criado e selecionado automaticamente
  </Step>
</Steps>

### Restri√ß√µes por Plano

<CardGroup cols={2}>
  <Card
    title="Plano Gratuito"
    icon="free"
  >
    - **1 workspace** inclu√≠do
    - Funcionalidades b√°sicas
    - Limite de notas mensais
    - Sem cria√ß√£o adicional
  </Card>
  
  <Card
    title="Planos Pagos"
    icon="credit-card"
  >
    - **M√∫ltiplos workspaces**
    - Sem limite de cria√ß√£o
    - Funcionalidades avan√ßadas
    - Suporte priorit√°rio
  </Card>
</CardGroup>

## Sele√ß√£o e Troca de Workspaces

### Contexto de Autentica√ß√£o

```javascript
// AuthContext - gerenciamento de tenants
const {
  currentTenant,      // Workspace atualmente selecionado
  tenants,           // Lista de todos os workspaces do usu√°rio
  selectTenant,      // Fun√ß√£o para trocar workspace
  createTenant       // Fun√ß√£o para criar novo workspace
} = useAuth();
```

### Troca de Workspace

```javascript
// Exemplo de troca
const handleWorkspaceChange = (newWorkspaceId) => {
  const selectedWorkspace = tenants.find(t => t.id === newWorkspaceId);
  selectTenant(selectedWorkspace);
  
  // Automaticamente:
  // - Recarrega dados do novo workspace
  // - Atualiza API calls com novo tenant
  // - Redireciona para dashboard do workspace
};
```

## Exclus√£o de Workspaces

### Processo de Exclus√£o

<Warning>
  **A√ß√£o Irrevers√≠vel**: A exclus√£o remove **TODOS** os dados do workspace, incluindo notas, configura√ß√µes e agentes IA.
</Warning>

### Confirma√ß√£o por Nome

<Steps>
  <Step title="Confirma√ß√£o">
    Usu√°rio deve digitar o **nome exato** do workspace
  </Step>
  <Step title="Valida√ß√£o">
    Sistema confirma que o nome confere
  </Step>
  <Step title="Exclus√£o">
    Remove todos os dados do workspace
  </Step>
  <Step title="Redirecionamento">
    Seleciona outro workspace dispon√≠vel ou redireciona
  </Step>
</Steps>

## Integra√ß√£o com API

### Headers de Tenant

Cada requisi√ß√£o √† API identifica o workspace ativo:

```bash
curl -X GET "https://api.connectvets.com.br/v1/notes" \
  -H "X-API-KEY: your_api_key" \
  -H "X-Tenant-ID: workspace_001"
```

### Exemplo de Integra√ß√£o

<CodeGroup>
```javascript JavaScript
// Configura√ß√£o do cliente API
const api = axios.create({
  baseURL: 'https://api.connectvets.com.br/v1',
  headers: {
    'X-API-KEY': 'your_api_key',
    'X-Tenant-ID': currentTenant.id
  }
});

// Todas as requisi√ß√µes s√£o automaticamente 
// scoped para o workspace atual
const notes = await api.get('/notes');
```

```python Python
import requests

# Session configurada com tenant
session = requests.Session()
session.headers.update({
    'X-API-KEY': 'your_api_key',
    'X-Tenant-ID': 'workspace_001'
})

# Todas as requisi√ß√µes usam o workspace
response = session.get('https://api.connectvets.com.br/v1/notes')
```

```bash cURL
# Definir tenant como vari√°vel
TENANT_ID="workspace_001"
API_KEY="your_api_key"

# Usar em todas as requisi√ß√µes
curl -X GET "https://api.connectvets.com.br/v1/notes" \
  -H "X-API-KEY: $API_KEY" \
  -H "X-Tenant-ID: $TENANT_ID"
```
</CodeGroup>

## Casos de Uso

### 1. Cl√≠nica √önica

**Cen√°rio**: Veterin√°rio independente
- Um workspace para toda a cl√≠nica
- Simples e direto
- Sem necessidade de switching

### 2. M√∫ltiplas Filiais

**Cen√°rio**: Rede de cl√≠nicas
- Um workspace por filial
- Dados isolados por localiza√ß√£o
- Relat√≥rios centralizados poss√≠veis

### 3. Veterin√°rio Consultor

**Cen√°rio**: Veterin√°rio que atende v√°rias cl√≠nicas
- Workspace para cada cliente
- Troca r√°pida entre contextos
- Dados seguros e isolados

### 4. Empresa de Software

**Cen√°rio**: Sistema integrado a m√∫ltiplas cl√≠nicas
- Workspace por cliente final
- White-label personalizado
- Billing isolado por tenant

## Boas Pr√°ticas

### Nomea√ß√£o de Workspaces

<Accordion title="Conven√ß√µes Recomendadas">
  - **Cl√≠nica √∫nica**: Nome da cl√≠nica
  - **M√∫ltiplas filiais**: "Cl√≠nica X - Filial Y"
  - **Departamentos**: "VetCorp - Emerg√™ncia"
  - **Teste**: "Cl√≠nica Teste - Sandbox"
</Accordion>

### Gerenciamento de Dados

<Accordion title="Organiza√ß√£o">
  - Use `external_id` para mapeamento entre sistemas
  - Mantenha metadados consistentes por workspace
  - Configure webhooks espec√≠ficos por tenant
  - Implemente backup por workspace
</Accordion>

### Controle de Acesso

<Accordion title="Seguran√ßa">
  - API Keys √∫nicas por workspace
  - Permiss√µes granulares por usu√°rio
  - Auditoria de acesso por tenant
  - Rota√ß√£o regular de chaves
</Accordion>

## Limita√ß√µes e Considera√ß√µes

### Limites por Plano

| Plano | Workspaces | Notas/m√™s | Usu√°rios | Webhooks |
|-------|------------|-----------|----------|----------|
| **Gratuito** | 1 | 50 | 2 | 1 |
| **Pro** | 5 | 1.000 | 10 | 5 |
| **Enterprise** | Ilimitado | 10.000+ | 50+ | 20+ |

### Performance

<Info>
  **Otimiza√ß√£o**: Workspaces com muitos dados podem ter performance impactada. Use filtros e pagina√ß√£o adequadamente.
</Info>

### Backup e Restore

<Warning>
  **Responsabilidade**: Backup de dados √© responsabilidade do usu√°rio. Exporte dados importantes regularmente.
</Warning>

## Migra√ß√£o Entre Workspaces

### Processo de Migra√ß√£o

<Steps>
  <Step title="Exporta√ß√£o">
    Exporte dados do workspace de origem
  </Step>
  <Step title="Processamento">
    Ajuste IDs e refer√™ncias se necess√°rio
  </Step>
  <Step title="Importa√ß√£o">
    Importe dados no workspace de destino
  </Step>
  <Step title="Valida√ß√£o">
    Verifique integridade dos dados migrados
  </Step>
</Steps>

### Exemplo de Migra√ß√£o

```javascript
// Exportar notas de um workspace
const exportNotes = async (sourceWorkspace) => {
  const notes = await api.get('/notes', {
    headers: { 'X-Tenant-ID': sourceWorkspace }
  });
  
  return notes.data;
};

// Importar para outro workspace
const importNotes = async (targetWorkspace, notes) => {
  for (const note of notes) {
    await api.post('/notes', note, {
      headers: { 'X-Tenant-ID': targetWorkspace }
    });
  }
};
```

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card title="API Keys" icon="key" href="/concepts/api-keys">
    Configure autentica√ß√£o por workspace
  </Card>
  <Card title="Webhooks" icon="webhook" href="/concepts/webhooks">
    Receba notifica√ß√µes por tenant
  </Card>
  <Card title="Integra√ß√£o" icon="puzzle-piece" href="/integration/onboarding">
    Implemente multi-tenancy em sua aplica√ß√£o
  </Card>
  <Card title="Exemplos" icon="code" href="/examples/basic-integration">
    Veja implementa√ß√µes pr√°ticas
  </Card>
</CardGroup>

---

<Tip>
**D√∫vidas sobre workspaces?** Entre em contato no [Discord](https://discord.gg/uN4NxUGk) ou [WhatsApp](https://wa.me/5531888835141).
</Tip> 