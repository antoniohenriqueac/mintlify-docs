---
title: 'Requisitos de √Åudio'
description: 'Especifica√ß√µes t√©cnicas e melhores pr√°ticas para arquivos de √°udio no ConnectVets Notes'
---

## Vis√£o Geral

O **ConnectVets Notes** processa arquivos de √°udio de consultas veterin√°rias para gerar transcri√ß√µes e an√°lises estruturadas. A qualidade do √°udio impacta diretamente na precis√£o dos resultados.

<Info>
  **Recomenda√ß√£o**: √Åudios de **boa qualidade** resultam em transcri√ß√µes **95%+ precisas** e an√°lises mais detalhadas.
</Info>

## Formatos Suportados

### Formatos Aceitos

| Formato | Extens√£o | Recomendado | Qualidade | Tamanho |
|---------|----------|-------------|-----------|---------|
| **MP3** | `.mp3` | ‚úÖ **SIM** | Boa | M√©dio |
| **WAV** | `.wav` | ‚≠ê **IDEAL** | Excelente | Grande |
| **M4A** | `.m4a` | ‚úÖ **SIM** | Boa | M√©dio |
| **AAC** | `.aac` | ‚úÖ **SIM** | Boa | Pequeno |
| **OGG** | `.ogg` | ‚ö†Ô∏è Limitado | Boa | M√©dio |
| **WEBM** | `.webm` | ‚ö†Ô∏è Limitado | Boa | M√©dio |

### Formato Recomendado: WAV

```bash
# Especifica√ß√µes ideais para WAV
Formato: WAV (PCM)
Sample Rate: 44.1 kHz ou 48 kHz
Bit Depth: 16-bit ou 24-bit
Canais: Mono ou Est√©reo
Dura√ß√£o m√°xima: 60 minutos
Tamanho m√°ximo: 100 MB
```

## Especifica√ß√µes T√©cnicas

### Qualidade de √Åudio

<CardGroup cols={2}>
  <Card
    title="Requisitos M√≠nimos"
    icon="volume-1"
  >
    - **Sample Rate**: 16 kHz+
    - **Bit Depth**: 16-bit+
    - **Dura√ß√£o**: 10 segundos - 60 minutos
    - **Tamanho**: M√°ximo 100 MB
    - **SNR**: 15 dB+ (Signal-to-Noise Ratio)
  </Card>
  
  <Card
    title="Configura√ß√£o Ideal"
    icon="volume-2"
  >
    - **Sample Rate**: 44.1 kHz ou 48 kHz
    - **Bit Depth**: 24-bit
    - **Dura√ß√£o**: 5-45 minutos
    - **Tamanho**: 20-80 MB
    - **SNR**: 25 dB+
  </Card>
</CardGroup>

### Limita√ß√µes de Tamanho

```javascript
// Valida√ß√£o de arquivo no frontend
function validateAudioFile(file) {
  const maxSize = 100 * 1024 * 1024; // 100 MB
  const minSize = 1 * 1024; // 1 KB
  const supportedFormats = ['mp3', 'wav', 'm4a', 'aac'];
  
  // Verificar tamanho
  if (file.size > maxSize) {
    return { 
      valid: false, 
      error: 'Arquivo muito grande. M√°ximo: 100 MB' 
    };
  }
  
  if (file.size < minSize) {
    return { 
      valid: false, 
      error: 'Arquivo muito pequeno. M√≠nimo: 1 KB' 
    };
  }
  
  // Verificar formato
  const extension = file.name.toLowerCase().split('.').pop();
  if (!supportedFormats.includes(extension)) {
    return { 
      valid: false, 
      error: `Formato n√£o suportado. Use: ${supportedFormats.join(', ')}` 
    };
  }
  
  return { valid: true };
}

// Uso da valida√ß√£o
const fileInput = document.getElementById('audio-file');
fileInput.addEventListener('change', (event) => {
  const file = event.target.files[0];
  const validation = validateAudioFile(file);
  
  if (!validation.valid) {
    alert(validation.error);
    return;
  }
  
  // Arquivo v√°lido, prosseguir com upload
  uploadAudio(file);
});
```

## Configura√ß√£o de Grava√ß√£o

### Configura√ß√µes do Microfone

<AccordionGroup>
  <Accordion title="üé§ Microfone Dedicado (Recomendado)">
    **Ideal para cl√≠nicas:**
    - Microfone condensador ou din√¢mico
    - Dist√¢ncia: 15-30 cm da boca
    - Padr√£o polar: Cardioide ou supercardioide
    - Redu√ß√£o de ru√≠do ativa
    
    **Exemplos:**
    - Audio-Technica ATR2100x-USB
    - Blue Yeti ou Blue Yeti Nano
    - Shure SM58 (com interface)
    - Rode PodMic
  </Accordion>
  
  <Accordion title="üì± Dispositivos M√≥veis">
    **Para grava√ß√£o m√≥vel:**
    - iPhone: Usar app de grava√ß√£o nativo
    - Android: Usar Google Recorder ou similar
    - Configurar qualidade m√°xima
    - Segurar device a 20-30 cm
    
    **Configura√ß√µes iOS:**
    ```
    Configura√ß√µes > Grava√ß√£o de Voz
    Qualidade: Sem Compress√£o
    Formato: WAV (se dispon√≠vel)
    ```
    
    **Configura√ß√µes Android:**
    ```
    Configura√ß√µes do App de Grava√ß√£o
    Qualidade: Alta (48kHz/24-bit)
    Formato: WAV ou FLAC
    ```
  </Accordion>
  
  <Accordion title="üíª Headset/Fone com Microfone">
    **Para uso ocasional:**
    - Headset com microfone integrado
    - Posicionar mic pr√≥ximo √† boca
    - Evitar microfones muito baratos
    
    **Modelos recomendados:**
    - SteelSeries Arctis 7
    - HyperX Cloud II
    - Logitech G Pro X
  </Accordion>
</AccordionGroup>

### Ambiente de Grava√ß√£o

```mermaid
graph TD
    A[Ambiente Ideal] --> B[Sala Fechada]
    A --> C[Pouco Ru√≠do]
    A --> D[Sem Eco]
    
    B --> E[Porta fechada]
    B --> F[Janelas fechadas]
    
    C --> G[Ar condicionado baixo]
    C --> H[Equipamentos silenciados]
    C --> I[Sem conversas paralelas]
    
    D --> J[Sala com m√≥veis]
    D --> K[Cortinas ou carpete]
    D --> L[Evitar salas vazias]
```

### Configura√ß√£o de Software

<CodeGroup>

```javascript WebRTC (Browser)
// Configura√ß√£o para grava√ß√£o no navegador
async function configureAudioRecording() {
  const constraints = {
    audio: {
      sampleRate: 48000,        // Sample rate alto
      channelCount: 1,          // Mono (suficiente para voz)
      echoCancellation: true,   // Cancelamento de eco
      noiseSuppression: true,   // Supress√£o de ru√≠do
      autoGainControl: true,    // Controle autom√°tico de ganho
      sampleSize: 16            // 16-bit depth
    }
  };
  
  try {
    const stream = await navigator.mediaDevices.getUserMedia(constraints);
    const mediaRecorder = new MediaRecorder(stream, {
      mimeType: 'audio/webm;codecs=opus',
      audioBitsPerSecond: 128000  // 128 kbps
    });
    
    return mediaRecorder;
  } catch (error) {
    console.error('Erro ao configurar grava√ß√£o:', error);
  }
}
```

```javascript React Native
// Configura√ß√£o para React Native
import { AudioRecorder, AudioUtils } from 'react-native-audio';

const audioPath = AudioUtils.DocumentDirectoryPath + '/consultation.wav';

const audioSettings = {
  SampleRate: 48000,
  Channels: 1,
  AudioQuality: 'High',
  AudioEncoding: 'wav',
  OutputFormat: 'wav',
  MeteringEnabled: true,
  IncludeBase64: false,
  AudioEncodingBitRate: 256000
};

// Iniciar grava√ß√£o
AudioRecorder.prepareRecordingAtPath(audioPath, audioSettings);
AudioRecorder.startRecording();
```

```python Python (pyaudio)
import pyaudio
import wave

# Configura√ß√£o para grava√ß√£o desktop
def configure_audio_recording():
    chunk = 1024
    format = pyaudio.paInt16    # 16-bit
    channels = 1                # Mono
    rate = 48000               # 48kHz sample rate
    
    audio = pyaudio.PyAudio()
    
    stream = audio.open(
        format=format,
        channels=channels,
        rate=rate,
        input=True,
        frames_per_buffer=chunk
    )
    
    return audio, stream, (chunk, format, channels, rate)

# Gravar √°udio
def record_audio(duration_seconds):
    audio, stream, config = configure_audio_recording()
    chunk, format, channels, rate = config
    
    frames = []
    
    for _ in range(0, int(rate / chunk * duration_seconds)):
        data = stream.read(chunk)
        frames.append(data)
    
    # Salvar arquivo
    with wave.open('consultation.wav', 'wb') as wf:
        wf.setnchannels(channels)
        wf.setsampwidth(audio.get_sample_size(format))
        wf.setframerate(rate)
        wf.writeframes(b''.join(frames))
    
    stream.close()
    audio.terminate()
```

</CodeGroup>

## Otimiza√ß√£o de √Åudio

### Pr√©-processamento

```javascript
// Normalizar volume do √°udio antes de enviar
async function normalizeAudio(audioBlob) {
  const audioContext = new AudioContext();
  const arrayBuffer = await audioBlob.arrayBuffer();
  const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
  
  // Encontrar pico m√°ximo
  const channelData = audioBuffer.getChannelData(0);
  let maxPeak = 0;
  
  for (let i = 0; i < channelData.length; i++) {
    const sample = Math.abs(channelData[i]);
    if (sample > maxPeak) {
      maxPeak = sample;
    }
  }
  
  // Normalizar se necess√°rio
  if (maxPeak > 0 && maxPeak < 0.95) {
    const normalizeRatio = 0.95 / maxPeak;
    
    for (let i = 0; i < channelData.length; i++) {
      channelData[i] *= normalizeRatio;
    }
  }
  
  return audioBuffer;
}
```

### Compress√£o Inteligente

```bash
# Usando FFmpeg para otimizar √°udio
# Converter para formato ideal mantendo qualidade

# MP3 de alta qualidade
ffmpeg -i input.wav -c:a libmp3lame -b:a 192k -ar 48000 output.mp3

# WAV otimizado 
ffmpeg -i input.wav -c:a pcm_s16le -ar 48000 -ac 1 output.wav

# M4A de alta qualidade
ffmpeg -i input.wav -c:a aac -b:a 256k -ar 48000 output.m4a

# Reduzir ru√≠do de fundo
ffmpeg -i input.wav -af "afftdn=nf=-40" output_clean.wav
```

## Casos de Uso Espec√≠ficos

### Consulta Individual

```javascript
// Configura√ß√£o para consulta 1:1 (veterin√°rio + dono)
const consultationConfig = {
  environment: 'quiet_room',
  participants: 2,
  microphoneDistance: '20-30cm',
  recordingDuration: '10-30 minutes',
  recommendedFormat: 'WAV 48kHz/16-bit',
  
  settings: {
    echoCancellation: true,
    noiseSuppression: true,
    autoGainControl: true
  }
};
```

### Cirurgia

```javascript
// Configura√ß√£o para ambiente cir√∫rgico
const surgeryConfig = {
  environment: 'operating_room',
  participants: '3-5',
  challenges: ['equipment_noise', 'air_conditioning', 'multiple_speakers'],
  microphoneDistance: '15-25cm',
  recordingDuration: '30-120 minutes',
  recommendedFormat: 'WAV 48kHz/24-bit',
  
  settings: {
    echoCancellation: false,    // Pode interferir com m√∫ltiplas vozes
    noiseSuppression: true,
    autoGainControl: false,     // Manter ganho fixo
    manualGain: 0.7
  }
};
```

### Telemedicina

```javascript
// Configura√ß√£o para consultas remotas
const telemedicineConfig = {
  environment: 'home_office',
  participants: 2,
  challenges: ['internet_latency', 'compression', 'echo'],
  recordingSource: 'video_call_recording',
  recommendedFormat: 'MP3 192kbps+',
  
  preprocessing: {
    noiseReduction: true,
    volumeNormalization: true,
    echoRemoval: true
  }
};
```

## Resolu√ß√£o de Problemas

### Problemas Comuns

<AccordionGroup>
  <Accordion title="üîá √Åudio Muito Baixo">
    **Sintomas:**
    - Transcri√ß√£o incompleta
    - Erro: "Audio volume too low"
    
    **Solu√ß√µes:**
    ```javascript
    // Verificar n√≠vel antes de enviar
    function checkAudioLevel(audioBuffer) {
      const channelData = audioBuffer.getChannelData(0);
      let rms = 0;
      
      for (let i = 0; i < channelData.length; i++) {
        rms += channelData[i] * channelData[i];
      }
      
      rms = Math.sqrt(rms / channelData.length);
      
      if (rms < 0.01) {
        return { 
          status: 'too_low', 
          message: 'Aumentar volume do microfone' 
        };
      }
      
      return { status: 'ok' };
    }
    ```
    
    **Ajustes:**
    - Aproximar microfone
    - Aumentar ganho do sistema
    - Falar mais alto/claro
  </Accordion>
  
  <Accordion title="üì¢ √Åudio Muito Alto/Distorcido">
    **Sintomas:**
    - Clipping/distor√ß√£o
    - Erro: "Audio clipping detected"
    
    **Solu√ß√µes:**
    ```javascript
    function detectClipping(audioBuffer) {
      const channelData = audioBuffer.getChannelData(0);
      let clippedSamples = 0;
      
      for (let i = 0; i < channelData.length; i++) {
        if (Math.abs(channelData[i]) >= 0.99) {
          clippedSamples++;
        }
      }
      
      const clippingRatio = clippedSamples / channelData.length;
      
      if (clippingRatio > 0.001) { // 0.1% de clipping
        return { 
          status: 'clipping', 
          message: 'Reduzir ganho do microfone' 
        };
      }
      
      return { status: 'ok' };
    }
    ```
    
    **Ajustes:**
    - Reduzir ganho
    - Afastar microfone
    - Usar limitador/compressor
  </Accordion>
  
  <Accordion title="üó£Ô∏è M√∫ltiplas Vozes Sobrepostas">
    **Sintomas:**
    - Transcri√ß√£o confusa
    - Erro: "Multiple speakers overlapping"
    
    **Solu√ß√µes:**
    - Orientar sobre fala alternada
    - Usar microfone direcional
    - Posicionar mic estrategicamente
    
    ```javascript
    // Detectar m√∫ltiplas vozes
    function detectMultipleSpeakers(audioBuffer) {
      // An√°lise de frequ√™ncia para detectar sobreposi√ß√£o
      const fftSize = 2048;
      const analyser = new AnalyserNode(audioContext, { fftSize });
      
      // Implementar detec√ß√£o de sobreposi√ß√£o
      // Retornar aviso se detectado
    }
    ```
  </Accordion>
  
  <Accordion title="üåä Ru√≠do de Fundo Excessivo">
    **Sintomas:**
    - Transcri√ß√£o com ru√≠dos
    - Erro: "Background noise too high"
    
    **Solu√ß√µes:**
    - Fechar portas/janelas
    - Desligar equipamentos
    - Usar noise gate
    
    ```bash
    # Reduzir ru√≠do com FFmpeg
    ffmpeg -i noisy_audio.wav -af "afftdn=nf=-40:nt=w" clean_audio.wav
    ```
  </Accordion>
</AccordionGroup>

### Ferramentas de Diagn√≥stico

```javascript
// Analisador completo de qualidade de √°udio
class AudioQualityAnalyzer {
  static async analyze(audioFile) {
    const audioContext = new AudioContext();
    const arrayBuffer = await audioFile.arrayBuffer();
    const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
    
    const analysis = {
      duration: audioBuffer.duration,
      sampleRate: audioBuffer.sampleRate,
      channels: audioBuffer.numberOfChannels,
      quality: this.assessQuality(audioBuffer),
      issues: this.detectIssues(audioBuffer)
    };
    
    return analysis;
  }
  
  static assessQuality(audioBuffer) {
    const channelData = audioBuffer.getChannelData(0);
    
    // Calcular RMS (volume m√©dio)
    let rms = 0;
    for (let i = 0; i < channelData.length; i++) {
      rms += channelData[i] * channelData[i];
    }
    rms = Math.sqrt(rms / channelData.length);
    
    // Calcular SNR estimado
    const snr = this.estimateSNR(channelData);
    
    // Detectar clipping
    const clipping = this.detectClipping(channelData);
    
    let quality = 'good';
    if (rms < 0.01 || snr < 15 || clipping > 0.01) {
      quality = 'poor';
    } else if (rms < 0.05 || snr < 20 || clipping > 0.001) {
      quality = 'fair';
    }
    
    return {
      score: quality,
      rms: rms,
      snr: snr,
      clipping: clipping
    };
  }
  
  static detectIssues(audioBuffer) {
    const issues = [];
    const channelData = audioBuffer.getChannelData(0);
    
    // Volume muito baixo
    const rms = this.calculateRMS(channelData);
    if (rms < 0.01) {
      issues.push({
        type: 'low_volume',
        severity: 'high',
        message: 'Volume muito baixo - aproximar microfone ou aumentar ganho'
      });
    }
    
    // Clipping
    const clipping = this.detectClipping(channelData);
    if (clipping > 0.001) {
      issues.push({
        type: 'clipping',
        severity: 'high',
        message: 'Distor√ß√£o detectada - reduzir ganho do microfone'
      });
    }
    
    // Dura√ß√£o muito curta
    if (audioBuffer.duration < 10) {
      issues.push({
        type: 'short_duration',
        severity: 'medium',
        message: '√Åudio muito curto - m√≠nimo recomendado: 10 segundos'
      });
    }
    
    return issues;
  }
}

// Uso do analisador
audioInput.addEventListener('change', async (event) => {
  const file = event.target.files[0];
  const analysis = await AudioQualityAnalyzer.analyze(file);
  
  console.log('An√°lise de qualidade:', analysis);
  
  if (analysis.issues.length > 0) {
    console.warn('Problemas detectados:', analysis.issues);
    // Mostrar alertas para o usu√°rio
  }
});
```

## Melhores Pr√°ticas

### Antes da Grava√ß√£o

<CardGroup cols={2}>
  <Card
    title="Prepara√ß√£o do Ambiente"
    icon="settings"
  >
    - ‚úÖ Testar equipamento de √°udio
    - ‚úÖ Verificar n√≠veis de ru√≠do
    - ‚úÖ Posicionar microfone corretamente
    - ‚úÖ Orientar participantes sobre fala clara
    - ‚úÖ Configurar software de grava√ß√£o
  </Card>
  
  <Card
    title="Checklist T√©cnico"
    icon="check-circle"
  >
    - ‚úÖ Sample rate: 48kHz+
    - ‚úÖ Bit depth: 16-bit+
    - ‚úÖ Formato: WAV ou MP3 192kbps+
    - ‚úÖ Espa√ßo em disco suficiente
    - ‚úÖ Bateria carregada (dispositivos m√≥veis)
  </Card>
</CardGroup>

### Durante a Consulta

- üéØ **Falar claramente** e em ritmo normal
- üéØ **Evitar interrup√ß√µes** simult√¢neas
- üéØ **Monitorar n√≠veis** de √°udio se poss√≠vel
- üéØ **Manter dist√¢ncia** consistente do microfone
- üéØ **Minimizar ru√≠dos** de papel, objetos, etc.

### Ap√≥s a Grava√ß√£o

```javascript
// Verifica√ß√£o p√≥s-grava√ß√£o
async function postRecordingCheck(audioFile) {
  const checks = {
    fileSize: audioFile.size > 1024 && audioFile.size < 100 * 1024 * 1024,
    duration: await getAudioDuration(audioFile),
    format: ['mp3', 'wav', 'm4a', 'aac'].includes(getFileExtension(audioFile)),
    quality: await AudioQualityAnalyzer.analyze(audioFile)
  };
  
  const passed = checks.fileSize && 
                 checks.duration >= 10 && 
                 checks.duration <= 3600 &&
                 checks.format &&
                 checks.quality.score !== 'poor';
  
  return {
    passed,
    checks,
    recommendations: generateRecommendations(checks)
  };
}
```

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card
    title="Tratamento de Erros"
    icon="alert-triangle"
    href="/integration/error-handling"
  >
    Como lidar com falhas de processamento
  </Card>
  <Card
    title="Onboarding"
    icon="play"
    href="/integration/onboarding"
  >
    Voltar ao guia de integra√ß√£o
  </Card>
  <Card
    title="API Reference"
    icon="book"
    href="/api-reference/notes/create"
  >
    Endpoint para criar notas
  </Card>
  <Card
    title="Exemplos Pr√°ticos"
    icon="code"
    href="/examples/basic-integration"
  >
    C√≥digo funcionando completo
  </Card>
</CardGroup> 