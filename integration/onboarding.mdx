---
title: 'Onboarding e Primeiros Passos'
description: 'Guia completo para integrar sua aplica√ß√£o com ConnectVets Notes do zero'
---

## Introdu√ß√£o ao Onboarding

O processo de **onboarding** no ConnectVets Notes √© projetado para colocar sua integra√ß√£o funcionando rapidamente, seguindo as melhores pr√°ticas de seguran√ßa e performance para aplica√ß√µes veterin√°rias.

<Info>
  **Tempo estimado**: 15-30 minutos para uma integra√ß√£o b√°sica funcionando
</Info>

## Pr√©-requisitos

Antes de come√ßar, certifique-se de ter:

<CardGroup cols={2}>
  <Card
    title="Conta ConnectVets"
    icon="user"
  >
    - ‚úÖ Conta criada em [notes.connectvets.com.br](https://notes.connectvets.com.br)
    - ‚úÖ Workspace/cl√≠nica configurado
    - ‚úÖ Plano ativo (trial ou pago)
  </Card>
  
  <Card
    title="Ambiente de Desenvolvimento"
    icon="code"
  >
    - ‚úÖ Node.js 16+ ou Python 3.8+
    - ‚úÖ Editor de c√≥digo
    - ‚úÖ Cliente HTTP (Postman, curl, etc.)
    - ‚úÖ Acesso √† internet
  </Card>
</CardGroup>

## Fluxo de Onboarding

### Passo 1: Criar API Key

<Steps>
  <Step title="Acessar Dashboard">
    Fa√ßa login em [notes.connectvets.com.br](https://notes.connectvets.com.br)
  </Step>
  
  <Step title="Ir para Configura√ß√µes">
    No menu lateral, clique em **Configura√ß√µes** ‚Üí **API Keys**
  </Step>
  
  <Step title="Criar Nova Chave">
    Clique em **"Nova API Key"** e escolha:
    - **Nome**: Ex: "Integra√ß√£o Sistema Veterin√°rio"
    - **Tipo**: `write` (recomendado para integra√ß√£o completa)
    - **Ambiente**: `test` para desenvolvimento, `live` para produ√ß√£o
  </Step>
  
  <Step title="Copiar Chave">
    ‚ö†Ô∏è **IMPORTANTE**: A chave √© exibida apenas uma vez! Copie e armazene com seguran√ßa.
  </Step>
</Steps>

### Formato da API Key

```bash
# Estrutura da chave
cvn_live_1234567890abcdef1234567890abcdef

# Onde:
cvn      = Prefixo ConnectVets Notes
live     = Ambiente (live/test)  
1234...  = Token √∫nico
```

### Passo 2: Configurar Ambiente

```bash
# .env (NUNCA commitar este arquivo!)
CONNECTVETS_API_KEY=cvn_test_sua_chave_aqui
CONNECTVETS_BASE_URL=https://api.connectvets.com.br
CONNECTVETS_ENVIRONMENT=development
```

```bash
# .env.example (pode commitar)
CONNECTVETS_API_KEY=your_api_key_here
CONNECTVETS_BASE_URL=https://api.connectvets.com.br
CONNECTVETS_ENVIRONMENT=development
```

### Passo 3: Primeiro Teste

<CodeGroup>

```javascript JavaScript/Node.js
// Testar conectividade com a API
const CONNECTVETS_API_KEY = process.env.CONNECTVETS_API_KEY;
const BASE_URL = 'https://api.connectvets.com.br/v1';

async function testConnection() {
  try {
    const response = await fetch(`${BASE_URL}/notes`, {
      method: 'GET',
      headers: {
        'X-API-KEY': CONNECTVETS_API_KEY,
        'Content-Type': 'application/json'
      }
    });
    
    if (response.ok) {
      const data = await response.json();
      console.log('‚úÖ Conex√£o estabelecida!');
      console.log(`üìã Encontradas ${data.data.length} notas`);
      return data;
    } else {
      console.error('‚ùå Erro na conex√£o:', response.status);
    }
  } catch (error) {
    console.error('‚ùå Erro de rede:', error.message);
  }
}

testConnection();
```

```python Python
import os
import requests

# Configura√ß√£o
API_KEY = os.getenv('CONNECTVETS_API_KEY')
BASE_URL = 'https://api.connectvets.com.br/v1'

def test_connection():
    """Testar conectividade com a API"""
    try:
        headers = {
            'X-API-KEY': API_KEY,
            'Content-Type': 'application/json'
        }
        
        response = requests.get(f'{BASE_URL}/notes', headers=headers)
        
        if response.status_code == 200:
            data = response.json()
            print('‚úÖ Conex√£o estabelecida!')
            print(f'üìã Encontradas {len(data["data"])} notas')
            return data
        else:
            print(f'‚ùå Erro na conex√£o: {response.status_code}')
            print(response.text)
            
    except requests.RequestException as error:
        print(f'‚ùå Erro de rede: {error}')

if __name__ == "__main__":
    test_connection()
```

```bash cURL
# Teste b√°sico via curl
curl -X GET "https://api.connectvets.com.br/v1/notes" \
  -H "X-API-KEY: cvn_test_sua_chave_aqui" \
  -H "Content-Type: application/json" \
  --verbose

# Resposta esperada: HTTP 200 com lista de notas
```

```go Go
package main

import (
    "encoding/json"
    "fmt"
    "io"
    "net/http"
    "os"
)

type NotesResponse struct {
    Data []Note `json:"data"`
}

type Note struct {
    ID       string `json:"id"`
    Name     string `json:"name"`
    Status   string `json:"transcription_status"`
}

func testConnection() error {
    apiKey := os.Getenv("CONNECTVETS_API_KEY")
    if apiKey == "" {
        return fmt.Errorf("CONNECTVETS_API_KEY n√£o configurada")
    }
    
    req, err := http.NewRequest("GET", "https://api.connectvets.com.br/v1/notes", nil)
    if err != nil {
        return err
    }
    
    req.Header.Set("X-API-KEY", apiKey)
    req.Header.Set("Content-Type", "application/json")
    
    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        return err
    }
    defer resp.Body.Close()
    
    if resp.StatusCode == 200 {
        fmt.Println("‚úÖ Conex√£o estabelecida!")
        var notes NotesResponse
        json.NewDecoder(resp.Body).Decode(&notes)
        fmt.Printf("üìã Encontradas %d notas\n", len(notes.Data))
    } else {
        fmt.Printf("‚ùå Erro na conex√£o: %d\n", resp.StatusCode)
    }
    
    return nil
}

func main() {
    if err := testConnection(); err != nil {
        fmt.Printf("Erro: %v\n", err)
    }
}
```

</CodeGroup>

### Passo 4: Envio de √Åudio

<CodeGroup>

```javascript JavaScript
async function uploadAudio(audioFile, metadata) {
  const formData = new FormData();
  formData.append('audio', audioFile);
  formData.append('name', metadata.patientName);
  formData.append('gender', metadata.gender || 'unidentified');
  formData.append('external_id', metadata.externalId || '');
  
  try {
    const response = await fetch(`${BASE_URL}/notes`, {
      method: 'POST',
      headers: {
        'X-API-KEY': CONNECTVETS_API_KEY
      },
      body: formData
    });
    
    if (response.ok) {
      const note = await response.json();
      console.log('‚úÖ √Åudio enviado com sucesso!');
      console.log('üìã ID da nota:', note.data.id);
      return note.data;
    } else {
      console.error('‚ùå Erro no envio:', response.status);
    }
  } catch (error) {
    console.error('‚ùå Erro:', error.message);
  }
}

// Exemplo de uso
const audioFile = new File([audioBlob], 'consulta.wav', { type: 'audio/wav' });
const metadata = {
  patientName: 'Rex',
  gender: 'male',
  externalId: 'PET_001'
};

uploadAudio(audioFile, metadata);
```

```python Python
import requests

def upload_audio(audio_file_path, metadata):
    """Upload de arquivo de √°udio"""
    try:
        with open(audio_file_path, 'rb') as audio_file:
            files = {'audio': audio_file}
            data = {
                'name': metadata.get('patient_name', ''),
                'gender': metadata.get('gender', 'unidentified'),
                'external_id': metadata.get('external_id', '')
            }
            
            headers = {'X-API-KEY': API_KEY}
            
            response = requests.post(
                f'{BASE_URL}/notes',
                headers=headers,
                files=files,
                data=data
            )
            
            if response.status_code == 201:
                note = response.json()
                print('‚úÖ √Åudio enviado com sucesso!')
                print(f'üìã ID da nota: {note["data"]["id"]}')
                return note['data']
            else:
                print(f'‚ùå Erro no envio: {response.status_code}')
                print(response.text)
                
    except Exception as error:
        print(f'‚ùå Erro: {error}')

# Exemplo de uso
metadata = {
    'patient_name': 'Rex',
    'gender': 'male',
    'external_id': 'PET_001'
}

upload_audio('path/to/audio.wav', metadata)
```

</CodeGroup>

### Passo 5: Monitorar Processamento

<CodeGroup>

```javascript JavaScript
async function checkNoteStatus(noteId) {
  try {
    const response = await fetch(`${BASE_URL}/notes/${noteId}`, {
      headers: {
        'X-API-KEY': CONNECTVETS_API_KEY
      }
    });
    
    if (response.ok) {
      const note = await response.json();
      return note.data;
    }
  } catch (error) {
    console.error('Erro ao verificar status:', error);
  }
}

async function waitForCompletion(noteId, maxWaitTime = 300000) {
  const startTime = Date.now();
  
  while (Date.now() - startTime < maxWaitTime) {
    const note = await checkNoteStatus(noteId);
    
    console.log(`Status: ${note.transcription_status}`);
    
    if (note.transcription_status === 'completed') {
      console.log('‚úÖ Processamento conclu√≠do!');
      return note;
    } else if (note.transcription_status === 'failed') {
      console.log('‚ùå Processamento falhou');
      return note;
    }
    
    // Aguardar 3 segundos antes da pr√≥xima verifica√ß√£o
    await new Promise(resolve => setTimeout(resolve, 3000));
  }
  
  console.log('‚è∞ Timeout: processamento ainda em andamento');
}
```

```python Python
import time

def check_note_status(note_id):
    """Verificar status da nota"""
    try:
        response = requests.get(
            f'{BASE_URL}/notes/{note_id}',
            headers={'X-API-KEY': API_KEY}
        )
        
        if response.status_code == 200:
            return response.json()['data']
    except Exception as error:
        print(f'Erro ao verificar status: {error}')

def wait_for_completion(note_id, max_wait_time=300):
    """Aguardar conclus√£o do processamento"""
    start_time = time.time()
    
    while time.time() - start_time < max_wait_time:
        note = check_note_status(note_id)
        
        print(f'Status: {note["transcription_status"]}')
        
        if note['transcription_status'] == 'completed':
            print('‚úÖ Processamento conclu√≠do!')
            return note
        elif note['transcription_status'] == 'failed':
            print('‚ùå Processamento falhou')
            return note
        
        # Aguardar 3 segundos
        time.sleep(3)
    
    print('‚è∞ Timeout: processamento ainda em andamento')
```

</CodeGroup>

## Padr√µes de Integra√ß√£o

### 1. Integra√ß√£o S√≠ncrona (Polling)

```javascript
// Fluxo completo com polling
async function processAudioSync(audioFile, metadata) {
  // 1. Upload
  const note = await uploadAudio(audioFile, metadata);
  
  // 2. Aguardar processamento
  const completedNote = await waitForCompletion(note.id);
  
  // 3. Usar resultado
  if (completedNote.transcription_status === 'completed') {
    displayResults(completedNote);
  }
}
```

### 2. Integra√ß√£o Ass√≠ncrona (Webhooks)

```javascript
// Configurar webhook primeiro
async function setupWebhook() {
  const webhook = await fetch(`${BASE_URL}/webhooks`, {
    method: 'POST',
    headers: {
      'X-API-KEY': CONNECTVETS_API_KEY,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      url: 'https://minha-app.com/webhooks/connectvets',
      events: ['note.completed', 'note.failed'],
      description: 'Webhook Principal'
    })
  });
}

// Upload sem aguardar
async function processAudioAsync(audioFile, metadata) {
  const note = await uploadAudio(audioFile, metadata);
  
  // Salvar ID da nota para processar no webhook
  await saveNoteToDatabase({
    id: note.id,
    status: 'pending',
    patient_name: metadata.patientName
  });
  
  return note.id;
}
```

## Tratamento de Erros

### C√≥digos de Erro Comuns

<Accordion title="400 Bad Request">
  **Causa**: Dados inv√°lidos ou arquivo corrompido
  
  **Solu√ß√µes**:
  - Validar formato do √°udio (WAV, MP3, M4A)
  - Verificar tamanho do arquivo (< 100MB)
  - Confirmar metadados obrigat√≥rios
</Accordion>

<Accordion title="401 Unauthorized">
  **Causa**: API Key inv√°lida ou expirada
  
  **Solu√ß√µes**:
  - Verificar se a chave est√° correta
  - Confirmar que n√£o expirou
  - Testar com nova API Key
</Accordion>

<Accordion title="429 Too Many Requests">
  **Causa**: Excedeu limite de requisi√ß√µes
  
  **Solu√ß√µes**:
  - Implementar retry com backoff
  - Distribuir requisi√ß√µes no tempo
  - Otimizar frequ√™ncia de chamadas
</Accordion>

### Implementa√ß√£o de Retry

<CodeGroup>
```javascript JavaScript
async function apiCallWithRetry(fn, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await fn();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      
      const delay = Math.min(1000 * Math.pow(2, i), 10000);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}
```

```python Python
import time
import random

def api_call_with_retry(fn, max_retries=3):
    for i in range(max_retries):
        try:
            return fn()
        except Exception as error:
            if i == max_retries - 1:
                raise error
            
            delay = min(1000 * (2 ** i), 10000) / 1000
            time.sleep(delay + random.uniform(0, 1))
```
</CodeGroup>

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card title="Configurar Webhooks" icon="webhook" href="/concepts/webhooks">
    Para notifica√ß√µes em tempo real
  </Card>
  <Card title="Ver Exemplos" icon="code" href="/examples/basic-integration">
    Implementa√ß√µes completas funcionais
  </Card>
  <Card title="Configurar Workspaces" icon="building" href="/concepts/tenants">
    Para m√∫ltiplas cl√≠nicas
  </Card>
  <Card title="API Reference" icon="book" href="/api-reference/overview">
    Documenta√ß√£o completa da API
  </Card>
</CardGroup>

## Checklist de Integra√ß√£o

### ‚úÖ Desenvolvimento
- [ ] API Key criada e testada
- [ ] Primeiro upload de √°udio funcionando
- [ ] Polling ou webhooks implementados
- [ ] Tratamento de erros implementado
- [ ] Logs e monitoramento configurados

### ‚úÖ Produ√ß√£o
- [ ] API Key de produ√ß√£o criada
- [ ] Ambiente de produ√ß√£o configurado
- [ ] Webhooks de produ√ß√£o testados
- [ ] Backup e recovery implementados
- [ ] Monitoramento de performance ativo

---

<Tip>
**Precisa de ajuda?** Entre em contato no [Discord](https://discord.gg/uN4NxUGk) ou [WhatsApp](https://wa.me/5531888835141).
</Tip> 